# テストプレイ項目表

## テスト環境
- **日時**: [記入してください]
- **参加人数**: [記入してください]
- **テスト実施者**: [記入してください]
- **Discordサーバー**: [記入してください]

---

## 1. ロビー機能テスト

### 1.1 プレイヤー参加・退出
| No | テスト項目 | 期待結果 | 結果 | 備考 |
|----|-----------|---------|------|------|
| 1-1 | 複数人が同時に参加 | 全員がプレイヤーリストに表示される | ☐ | |
| 1-2 | プレイヤーが退出 | 退出したプレイヤーがリストから削除される | ☐ | |
| 1-3 | 最後の1人が退出 | ロビーが正常に動作し続ける | ☐ | |
| 1-4 | 参加者の名前が正しく表示される | Discordの名前が表示される | ☐ | |
| 1-5 | 参加者のアバターが正しく表示される | Discordのアバターが表示される | ☐ | |

### 1.2 ゲーム設定
| No | テスト項目 | 期待結果 | 結果 | 備考 |
|----|-----------|---------|------|------|
| 1-6 | 最大ラウンド数を変更 | 設定が保存され、ゲーム開始時に反映される | ☐ | |
| 1-7 | 制限時間を変更 | 設定が保存され、ゲーム開始時に反映される | ☐ | |
| 1-8 | 設定変更が全員に同期される | 全員の画面で同じ設定が表示される | ☐ | |

### 1.3 管理者機能
| No | テスト項目 | 期待結果 | 結果 | 備考 |
|----|-----------|---------|------|------|
| 1-9 | 最初の参加者が自動的に管理者になる | 最初の参加者が管理者権限を持つ | ☐ | |
| 1-10 | 管理者がゲーム開始ボタンを押せる | ゲームが開始される | ☐ | |
| 1-11 | 非管理者がゲーム開始ボタンを押せない | ボタンが無効化されている | ☐ | |
| 1-12 | 管理者権限の移譲 | 新しい管理者が設定され、旧管理者は非管理者になる | ☐ | |
| 1-13 | 管理者が退出した場合 | 残りのプレイヤーに管理者権限が移譲される | ☐ | **重要** |

---

## 2. ゲームフローテスト

### 2.1 ゲーム開始
| No | テスト項目 | 期待結果 | 結果 | 備考 |
|----|-----------|---------|------|------|
| 2-1 | ゲーム開始ボタンを押す | 問題選択画面に遷移する | ☐ | |
| 2-2 | 最初の出題者が正しく設定される | プレイヤー順序の最初の人が出題者になる | ☐ | |
| 2-3 | 問題候補が4つ表示される | 4つの問題が表示される | ☐ | |
| 2-4 | スコアが0で初期化される | 全員のスコアが0になる | ☐ | |

### 2.2 問題選択
| No | テスト項目 | 期待結果 | 結果 | 備考 |
|----|-----------|---------|------|------|
| 2-5 | 出題者が問題を選択 | 問題画面に遷移する | ☐ | |
| 2-6 | 非出題者が問題を選択できない | 選択できない（待機画面が表示される） | ☐ | |
| 2-7 | 問題が正しく表示される | 問題文とカテゴリが表示される | ☐ | |
| 2-8 | 出題者の名前が表示される | 出題者の名前が表示される | ☐ | |
| 2-9 | ラウンド情報が正しく表示される | 「Round X / Y」が表示される | ☐ | |
| 2-10 | CHANCEラウンドの表示 | 2倍スコアのバッジが表示される | ☐ | |

---

## 3. 回答機能テスト

### 3.1 回答入力
| No | テスト項目 | 期待結果 | 結果 | 備考 |
|----|-----------|---------|------|------|
| 3-1 | 数値を入力して回答 | 回答が送信される | ☐ | |
| 3-2 | 回答後に「回答完了」画面が表示される | 待機画面が表示される | ☐ | |
| 3-3 | 回答を変更できない | 回答後は変更できない | ☐ | |
| 3-4 | 出題者も回答できる | 出題者が回答できる | ☐ | **重要** |
| 3-5 | 全員が回答すると自動的に結果画面へ | 全員回答後に結果画面に遷移 | ☐ | |

### 3.2 タイマー機能
| No | テスト項目 | 期待結果 | 結果 | 備考 |
|----|-----------|---------|------|------|
| 3-6 | タイマーが正しくカウントダウン | 残り時間が表示される | ☐ | |
| 3-7 | 残り10秒で警告表示 | タイマーが赤くなる | ☐ | |
| 3-8 | 時間切れで自動回答 | 0が自動送信される | ☐ | |
| 3-9 | 他の人が回答してもタイマーがリセットされない | タイマーがリセットされない | ☐ | **重要（修正済み）** |
| 3-10 | 問題が変わったときにタイマーがリセット | 新しい問題でタイマーがリセット | ☐ | |

### 3.3 回答リセット
| No | テスト項目 | 期待結果 | 結果 | 備考 |
|----|-----------|---------|------|------|
| 3-11 | 新しい問題で回答がリセットされる | 前回の回答がクリアされる | ☐ | **重要（修正済み）** |
| 3-12 | 出題者1が問題を選ぶ → 全員回答 → 出題者2が問題を選ぶ → 出題者1が回答 | 出題者2も回答できる | ☐ | **重要（修正済み）** |
| 3-13 | 回答リセットが全員に同期される | 全員の回答がリセットされる | ☐ | |

---

## 4. 結果発表テスト

### 4.1 中央値計算
| No | テスト項目 | 期待結果 | 結果 | 備考 |
|----|-----------|---------|------|------|
| 4-1 | 回答が正しくソートされる | 小さい順に並ぶ | ☐ | |
| 4-2 | 奇数人数の場合の中央値 | 中央の値が中央値になる | ☐ | |
| 4-3 | 偶数人数の場合の中央値 | 中央2つの平均が中央値になる | ☐ | |
| 4-4 | 全員が同じ値を回答 | その値が中央値になる | ☐ | |

### 4.2 スコア計算
| No | テスト項目 | 期待結果 | 結果 | 備考 |
|----|-----------|---------|------|------|
| 4-5 | 中央値に最も近い人が+100点 | 正しく加点される | ☐ | |
| 4-6 | 複数人が同じ距離で最も近い | 全員に+100点 | ☐ | |
| 4-7 | 最大値の人が-50点 | 正しく減点される | ☐ | |
| 4-8 | 最小値の人が-50点 | 正しく減点される | ☐ | |
| 4-9 | 最大値/最小値が中央値と同じ場合 | ペナルティなし | ☐ | |
| 4-10 | 3人未満の場合のペナルティ | ペナルティなし | ☐ | |
| 4-11 | CHANCEラウンドでスコアが2倍 | スコアが2倍になる | ☐ | |

### 4.3 ハイライト表示
| No | テスト項目 | 期待結果 | 結果 | 備考 |
|----|-----------|---------|------|------|
| 4-12 | 正解者（+100pt）がハイライトされる | 正解者がハイライトされる | ☐ | **重要（修正済み）** |
| 4-13 | ハイライトが全員で同期される | 全員の画面で同じ人がハイライト | ☐ | **重要（修正済み）** |
| 4-14 | 複数の正解者がいる場合 | 全員がハイライトされる | ☐ | |

### 4.4 効果音
| No | テスト項目 | 期待結果 | 結果 | 備考 |
|----|-----------|---------|------|------|
| 4-15 | 正解時にse_result_normalが再生 | 効果音が再生される | ☐ | |
| 4-16 | 正解時に紙吹雪が表示 | 紙吹雪エフェクトが表示 | ☐ | |
| 4-17 | マイナス点時にse_buzzerが再生 | 効果音が再生される | ☐ | |

---

## 5. 順位発表テスト

### 5.1 順位表示
| No | テスト項目 | 期待結果 | 結果 | 備考 |
|----|-----------|---------|------|------|
| 5-1 | 全ラウンド終了後に順位画面へ | 順位画面が表示される | ☐ | |
| 5-2 | ドラムロール効果音が2秒再生 | 効果音が再生される | ☐ | |
| 5-3 | ドラムロール後に順位が表示 | 2秒後に順位が表示 | ☐ | |
| 5-4 | 順位が正しくソートされる | スコア順に並ぶ | ☐ | |
| 5-5 | 1位のプレイヤーが正しく表示 | 最高スコアの人が1位 | ☐ | |
| 5-6 | 同点の場合の順位 | 同点の人が同じ順位 | ☐ | |
| 5-7 | 1位のプレイヤーに紙吹雪 | 紙吹雪エフェクトが表示 | ☐ | |
| 5-8 | 1位のプレイヤーにse_cheerが再生 | 効果音が再生される | ☐ | |

---

## 6. ラウンド進行テスト

### 6.1 ラウンド遷移
| No | テスト項目 | 期待結果 | 結果 | 備考 |
|----|-----------|---------|------|------|
| 6-1 | 結果画面から次のラウンドへ | 次の出題者が問題を選ぶ画面へ | ☐ | |
| 6-2 | 出題者が順番に変わる | プレイヤー順序通りに変わる | ☐ | |
| 6-3 | 1周したらラウンドが増える | ラウンド数が増える | ☐ | |
| 6-4 | 最大ラウンド数に達したら順位画面へ | 順位画面が表示される | ☐ | |
| 6-5 | 順位画面からロビーに戻る | ロビー画面に戻る | ☐ | |

---

## 7. 同期テスト

### 7.1 状態同期
| No | テスト項目 | 期待結果 | 結果 | 備考 |
|----|-----------|---------|------|------|
| 7-1 | 全員が同じ画面を表示 | フェーズが同期される | ☐ | |
| 7-2 | スコアが全員で同期 | 全員のスコアが同じ | ☐ | |
| 7-3 | 回答状態が全員で同期 | 全員の回答状態が同じ | ☐ | |
| 7-4 | 問題が全員で同期 | 全員が同じ問題を見る | ☐ | |
| 7-5 | 結果が全員で同期 | 全員が同じ結果を見る | ☐ | |

### 7.2 ネットワーク遅延
| No | テスト項目 | 期待結果 | 結果 | 備考 |
|----|-----------|---------|------|------|
| 7-6 | 遅延がある環境でも正常動作 | 同期が取れる | ☐ | |
| 7-7 | 接続が不安定な場合 | エラーが発生しない | ☐ | |

---

## 8. UI/UXテスト

### 8.1 表示
| No | テスト項目 | 期待結果 | 結果 | 備考 |
|----|-----------|---------|------|------|
| 8-1 | ロゴが正しく表示される | ロゴが表示される | ☐ | |
| 8-2 | ロゴがある場合、タイトルが非表示 | タイトルが表示されない | ☐ | |
| 8-3 | プレイヤーバッジのレイアウト | 見やすく配置される | ☐ | |
| 8-4 | ボタンのレイアウト | 見やすく配置される | ☐ | |
| 8-5 | レスポンシブデザイン | 画面サイズに応じて調整 | ☐ | |

### 8.2 操作性
| No | テスト項目 | 期待結果 | 結果 | 備考 |
|----|-----------|---------|------|------|
| 8-6 | ボタンがクリックしやすい | 適切なサイズ | ☐ | |
| 8-7 | 入力フィールドが使いやすい | 適切なサイズ | ☐ | |
| 8-8 | エラーメッセージが分かりやすい | 適切なメッセージ | ☐ | |

---

## 9. パフォーマンステスト

### 9.1 動作速度
| No | テスト項目 | 期待結果 | 結果 | 備考 |
|----|-----------|---------|------|------|
| 9-1 | 画面遷移がスムーズ | 遅延が少ない | ☐ | |
| 9-2 | 回答送信が即座に反映 | 遅延が少ない | ☐ | |
| 9-3 | 多数のプレイヤーでも動作 | 10人以上でも動作 | ☐ | |

### 9.2 リソース使用
| No | テスト項目 | 期待結果 | 結果 | 備考 |
|----|-----------|---------|------|------|
| 9-4 | メモリリークがない | 長時間プレイしても問題なし | ☐ | |
| 9-5 | CPU使用率が適切 | 過度な負荷がない | ☐ | |

---

## 10. エッジケーステスト

### 10.1 特殊な状況
| No | テスト項目 | 期待結果 | 結果 | 備考 |
|----|-----------|---------|------|------|
| 10-1 | 1人だけのゲーム | 正常に動作する | ☐ | |
| 10-2 | 最大人数でのゲーム | 正常に動作する | ☐ | |
| 10-3 | 全員が同じ値を回答 | 正常に処理される | ☐ | |
| 10-4 | 全員が異なる値を回答 | 正常に処理される | ☐ | |
| 10-5 | 0を回答 | 正常に処理される | ☐ | |
| 10-6 | 非常に大きな値を回答 | 正常に処理される | ☐ | |
| 10-7 | 負の値を回答 | 正常に処理される（またはエラー） | ☐ | |

### 10.2 異常系
| No | テスト項目 | 期待結果 | 結果 | 備考 |
|----|-----------|---------|------|------|
| 10-8 | ゲーム中にブラウザをリロード | 適切に処理される | ☐ | |
| 10-9 | ゲーム中にタブを閉じる | 適切に処理される | ☐ | |
| 10-10 | ネットワーク切断 | 適切に処理される | ☐ | |

---

## 11. 修正済みバグの回帰テスト

### 11.1 出題者回答バグ
| No | テスト項目 | 期待結果 | 結果 | 備考 |
|----|-----------|---------|------|------|
| 11-1 | 出題者1が問題を選ぶ → 全員回答 → 出題者2が問題を選ぶ → 出題者1が回答 | 出題者2も回答できる | ☐ | **重要** |
| 11-2 | 問題選択直後に回答リセットが完了するまで待機 | リセット完了後に回答チェック開始 | ☐ | **重要** |
| 11-3 | 回答リセットのポーリングが正常動作 | 最大5秒まで待機 | ☐ | |

### 11.2 ハイライト同期バグ
| No | テスト項目 | 期待結果 | 結果 | 備考 |
|----|-----------|---------|------|------|
| 11-4 | 正解者が全員で同期してハイライト | 全員の画面で同じ人がハイライト | ☐ | **重要** |
| 11-5 | 中央値が浮動小数点数の場合 | 正解者が正しくハイライト | ☐ | |

### 11.3 タイマーリセットバグ
| No | テスト項目 | 期待結果 | 結果 | 備考 |
|----|-----------|---------|------|------|
| 11-6 | 他の人が回答してもタイマーがリセットされない | タイマーが継続 | ☐ | **重要** |
| 11-7 | 問題が変わったときにタイマーがリセット | タイマーがリセット | ☐ | |

---

## 12. 総合テスト

### 12.1 フルゲームプレイ
| No | テスト項目 | 期待結果 | 結果 | 備考 |
|----|-----------|---------|------|------|
| 12-1 | ロビー → ゲーム開始 → 全ラウンド → 順位発表 → ロビー | 正常に完了 | ☐ | |
| 12-2 | 複数ゲームを連続でプレイ | 正常に動作 | ☐ | |
| 12-3 | 途中退出者がいてもゲーム継続 | 正常に動作 | ☐ | |

---

## テスト結果サマリー

### 成功項目数: [記入してください] / [総項目数]
### 失敗項目数: [記入してください]
### 要修正項目: [記入してください]

### 発見されたバグ
1. [記入してください]
2. [記入してください]
3. [記入してください]

### 改善提案
1. [記入してください]
2. [記入してください]
3. [記入してください]

### その他のコメント
[記入してください]

---

## テスト実施後のアクション

- [ ] 発見されたバグをIssueに登録
- [ ] 改善提案を検討
- [ ] 修正が必要な項目を優先順位付け
- [ ] 次のテストプレイの日程を決定

